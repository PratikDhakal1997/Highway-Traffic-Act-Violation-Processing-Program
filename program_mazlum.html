<!--
Assignment 5&6
CSD 2103	
Front-End Web Development II
2024-Winter

Highway Traffic Act Violation Processing Program

Group Members;
- Pratik Dhakal - C0899291 
- Dipendra Thapa - C0907555 
- Mazlum Unay - C0885585 
- Sudan Krishna Dhakal-C0901145 
- Ashish Pandey - C0895988

03/08/2024

-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Highway Traffic Act Violation Processing Program</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f2f2f2;
    margin: 0;
    padding: 0;
  }
  .navbar_main{
    height: 70px;
    background-color: #31387A;
    top: 50px;

  }
  input[type="text"],
  select {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
  }

  button {
    width: 100%;
    background-color: #00478f;
    color: white;
    padding: 14px 20px;
    margin: 8px 0;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }

  button:hover {
    background-color: #31387a;
  }
  h1 {
    text-align: center;
    color: #333;
    margin-top: 30px;
  }

  #introduction{
    color: #555;
    text-align: center;
    animation: moveLeftToRight 8s linear infinite;
  }
  p{
        color: #555;
    text-align: center;
  }
   

  @keyframes moveLeftToRight {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .container {
    display: flex;
    justify-content: space-around;
    align-items: flex-start;
    flex-wrap: wrap;
  }

  form {
    max-width: 400px;
    margin: 20px;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  #output {
    max-width: 400px;
    margin: 20px;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: none; /* Initially hide the output */
  }

  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }

  .modal-content {
    background-color: #fefefe;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

  strong {
    color: #333;
  }
  .logo {
    padding: 0.5rem;
    background-color: #ffffff;
    border: 1px solid #1e266e;
    border-radius: 0;
    box-sizing: border-box;
    max-width: 100%;
    height: auto;
    position: absolute;
    z-index: 1;
    left: 100px;
    top: 25px;
  }
  /* Style the navigation bar */
  .navbar {
    width: 100%;
    overflow: auto;
    text-align: end;
  }

  /* Navbar links */
  .navbar a {
    float: right;
    text-align: center;
    padding: 12px;
    color: white;
    text-decoration: none;
    font-size: 17px;
  }

  /* Navbar links on mouse-over */
  .navbar a:hover {
    background-color: #000;
  }

  /* Add responsiveness - will automatically display the navbar vertically instead of horizontally on screens less than 500 pixels */
  @media screen and (max-width: 500px) {
    .navbar a {
      float: none;
      display: block;
    }
  }
</style>
</head>
<body>

   
<div>
  <p style="color:#f2f2f2;">br</p> <!-- CHANGE THE COLOR OF TEXT MAKE IT INVISIBLE-->
</div>
 

<div class="navbar_main">
  hi  
  <img class="logo" src="https://www.ontariocourts.ca/ocj/wp-content/uploads/2023/05/ocjlogo.png" alt="logo">
  <div class="navbar">
    <a href="#"><i class="fa fa-fw fa-user"></i> Login</a>
    <a href="#"><i class="fa fa-fw fa-search"></i> Search</a>
    <a href="#"><i class="fa fa-fw fa-envelope"></i> Contact</a>
    <a class="active" href="#"><i class="fa fa-fw fa-home"></i> Home</a>
  </div>
</div>
<h1 id="introduction">Highway Traffic Act Violation Processing Program</h1>

<div class="container">
  <form id="trafficForm">
    <label for="name">Driver's Name:</label>
    <input type="text" id="name" name="name" required><br><br>
    
    <label for="licenseNumber">Driver's License Number:</label>
    <input type="text" id="licenseNumber" name="licenseNumber" required><br><br>

    <button type="submit">Submit</button>
  </form>
  <div id="output"></div>
</div>

<!-- Modal -->
<div id="myModal" class="modal">
  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="modalContent"></div>
  </div>
</div>

<script>
  // Get the modal
  var modal = document.getElementById("myModal");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // JavaScript for processing offences and generating output
  document.getElementById("trafficForm").addEventListener("submit", function(event) {
    event.preventDefault();
    // Input values
    const name = document.getElementById("name").value;
    const licenseNumber = document.getElementById("licenseNumber").value;

        // Randomly select validity
    const licenseValidity = Math.random() < 0.5 ? "Valid" : "Invalid";
    const permitValidity = Math.random() < 0.5 ? "Valid" : "Invalid";
    const insuranceValidity = Math.random() < 0.5 ? "Valid" : "Invalid";
    const seatBelt= Math.random() < 0.5 ? "Valid" : "Invalid";


    // Date and time
    const dateTime = new Date().toLocaleString();

    // Generate ticket number (random number)
    const ticketNumber = Math.floor(Math.random() * 10000);

    // License Number Validation
    // const licenseNumberIsValid = /^[0-9]{15}$/.test(licenseNumber);
    const licenseNumberIsValid = /^[A-Z]{1}[0-9]{2,5}-[0-9]{1,5}-[0-9]{1,5}$/.test(licenseNumber); // CHANGE THE FORMAT OF LICENSE NUMBER


    if (!licenseNumberIsValid) {
      alert("Please enter a valid 15-digit license number. \n (A000-00000-00000)");  // ADD GENERAL LICENSE NUMBER CONCEPT TO ALERT 
      return;
    }

    // Hide the form
    document.getElementById("trafficForm").style.display = "none";

    // Display the output container
    document.getElementById("output").style.display = "block";

    // Offences
    const offences = []; // For now, keeping it empty as it's not relevant to the modal
    const offencesIndex = [];// To check if the offence is already selected   
    // Randomly select other offences
    const offencesList = [
      {
        name: " Valid Permit",
        section: "23(3)",
        fine: 175,
        warning: "No"
      },
      {
        name: "Valid License",       // TYPO FIXED
        section: "32(1)",
        fine: 260,
        warning: "No"
      },
      {
        name: "SeatBelt ON",
        section: "32(1)",
        fine: 260,
        warning: "No"
      },
      {
        name: "Valid Insurance",
        section: "32(1)",
        fine: 175,
        warning: "No"
      },
      {
        name: "Speeding",
        section: "Schedule B Highway Traffic Act Speeding",
        fine: 85,
        warning: "No"
      }
    ];

    // Randomly choose offences from the list
    var randomWaring ;
    const numOfOffences = Math.floor(Math.random() * offencesList.length) + 1;
    for (let i = 0; i < numOfOffences; i++) {
      const randomIndex = Math.floor(Math.random() * offencesList.length);
    if(!offencesIndex.includes(randomIndex)){
      debugger
      offences.push(offencesList[randomIndex]);
      offencesIndex.push(randomIndex);
    }
     randomWaring=Math.floor(Math.random() * offences.length);
}
offences[randomWaring].warning="Yes";

    // Calculate total fine
    let totalFine = 0;
    offences.forEach(offence => {
      if (offence.warning === "No") {
        totalFine += offence.fine;
      }
    });
    // Prepare modal content
    let modalContent= `<h1>Ticket Info</h1>`;
    modalContent += `<strong>Date and Time:</strong> <input value="${dateTime}"> <br> <br>`;
    modalContent += `<strong>Ticket Number:</strong> <input value="${ticketNumber}" <br>`;
    modalContent+= `<h1>Driver's Info</h1>`;
    modalContent += `<strong>Driver's Name:</strong> <input value="${name}"> <br> <br>`;
    modalContent += `<strong>Driver's License Number:</strong> <input value="${licenseNumber}" <br>`;
    modalContent+= `<h1>Offence Info</h1>`;
    // offencesList.forEach(offence => {
    //   modalContent += `<li>${offence.name}     <input type="checkbox" >, Warning: ${offence.warning},
    //    Fine: ${offence.fine}</li>`;
    // });
    offencesList.forEach(offence => {
  // Check if the offense is present in offences
  const isChecked = offences.some(otherOffence => otherOffence.name === offence.name);

  // Append checkbox accordingly
  modalContent += `<li>${offence.name} <input type="checkbox" ${isChecked ? 'checked' : ''}>,      Warning: ${offence.warning},      Fine: ${offence.fine}</li>`;

});


    modalContent += `<strong> Total Fine: </strong>  $${totalFine}<br>`;
    // Other relevant information can be added here

    document.getElementById("modalContent").innerHTML = modalContent;

    // Display the modal
    modal.style.display = "block";

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
      // Reset form and output
      document.getElementById("trafficForm").reset();
      document.getElementById("trafficForm").style.display = "block";
      document.getElementById("output").style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
        // Reset form and output
        document.getElementById("trafficForm").reset();
        document.getElementById("trafficForm").style.display = "block";
        document.getElementById("output").style.display = "none";
      }
    }
  });
</script>
</body>
</html>
